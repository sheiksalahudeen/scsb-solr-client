<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Search</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
<div th:fragment="searchContent">
    <div th:fragment="search-form" xmlns:th="http://www.thymeleaf.org" th:remove="tag">
        <form id="search-form" name="search-form" class="form-horizontal" action="#"
              th:action="@{/searchRecords}"
              th:object="${searchRecordsRequest}" method="post">
            <fieldset>
                <div id="searchRecordsDiv">
                    <div class="container">
                        <h3 style="color: dodgerblue">SCSB Search</h3>
                        <br/>
                        <input id="pageNumber" name="pageNumber" type="text"
                               th:field="*{pageNumber}" hidden="hidden"/>
                        <input id="pageSize" name="pageSize" type="text" th:field="*{pageSize}"
                               hidden="hidden"/>
                        <input id="totalPageCount" name="totalPageCount" type="text"
                               th:field="*{totalPageCount}" hidden="hidden"/>
                        <div class="form-group">
                            <div id="fieldValueId" name="fieldValueName" class="col-sm-8">
                                Search <input type="text" th:field="*{fieldValue}"
                                              class="form-control"
                                              id="fieldValue"/>
                            </div>
                            <div id="fieldNameId" name="fieldName" class="col-sm-4">
                                <label></label>
                                <select id="fieldName"
                                        class="form-control"
                                        style="width: 160px;"
                                        th:field="*{fieldName}">
                                    <option value="">ALL Fields</option>
                                    <option value="Author">Author</option>
                                    <option value="Title">Title</option>
                                    <option value="TitleStartsWith">Title Starts with</option>
                                    <option value="Publisher">Publisher</option>
                                    <option value="PublicationPlace">Publication Place</option>
                                    <option value="PublicationDate">Publication Date</option>
                                    <option value="Subject">Subject</option>
                                    <option value="ISBN">ISBN</option>
                                    <option value="ISSN">ISSN</option>
                                    <option value="OCLCNumber">OCLC Number</option>
                                    <option value="Notes">Notes</option>
                                    <option value="CallNumber">Call Number</option>
                                    <option value="Barcode">Barcode</option>
                                </select>
                            </div>
                        </div>
                        <div id="checkBoxesId" name="checkBoxesName" class="form-group col-sm-9">
                            <div id="ownInstId" name="ownInstName" class="col-sm-3">
                                <label>Owning Institution</label>
                                <ul class="checkbox" style="padding-left: 20px;">
                                    <li><input type="checkbox" id="owningInstitutionNYPL"
                                               name="owningInstitutionNYPL" value="NYPL"
                                               th:field="*{owningInstitutions}"/><label
                                            for="owningInstitutionNYPL">NYPL</label></li>
                                    <li><input type="checkbox" id="owningInstitutionCUL"
                                               name="owningInstitutionCUL" value="CUL"
                                               th:field="*{owningInstitutions}"/><label
                                            for="owningInstitutionCUL">Columbia</label></li>
                                    <li><input type="checkbox" id="owningInstitutionPUL"
                                               name="owningInstitutionPUL" value="PUL"
                                               th:field="*{owningInstitutions}"/><label
                                            for="owningInstitutionPUL">Princeton</label></li>
                                </ul>
                            </div>
                            <div id="cgdId" name="cgdName" class="col-sm-3">
                                <label>Collection Group</label>
                                <ul class="checkbox" style="padding-left: 20px;">
                                    <li><input type="checkbox" id="shared" name="shared" value="Shared"
                                               th:field="*{collectionGroupDesignations}"/><label
                                            for="shared">Shared</label></li>
                                    <li><input type="checkbox" id="private" name="private"
                                               value="Private"
                                               th:field="*{collectionGroupDesignations}"/><label
                                            for="private">Private</label></li>
                                    <li><input type="checkbox" id="open" name="open" value="Open"
                                               th:field="*{collectionGroupDesignations}"/><label
                                            for="open">Open</label></li>
                                </ul>
                            </div>
                            <div id="availabilityId" name="availabilityName" class="col-sm-3">
                                <label>Availability</label>
                                <ul class="checkbox" style="padding-left: 20px;">
                                    <li><input type="checkbox" id="available" name="available"
                                               value="Available" th:field="*{availability}"/><label
                                            for="available">Available</label></li>
                                    <li><input type="checkbox" id="notAvailable" name="notAvailable"
                                               value="Not Available" th:field="*{availability}"/><label
                                            for="notAvailable">Not Available</label></li>
                                </ul>
                            </div>
                            <div id="materialTypeId" name="materialTypeName" class="col-sm-3">
                                <label>Material Type</label>
                                <ul class="checkbox" style="padding-left: 20px;">
                                    <li><input type="checkbox" id="monograph" name="monograph"
                                               value="Monograph" th:field="*{materialTypes}"/><label
                                            for="monograph">Monograph</label></li>
                                    <li><input type="checkbox" id="serials" name="serials"
                                               value="Serial" th:field="*{materialTypes}"/><label
                                            for="serials">Serials</label></li>
                                    <li><input type="checkbox" id="others" name="others" value="Other"
                                               th:field="*{materialTypes}"/><label
                                            for="others">Others</label></li>
                                </ul>
                            </div>
                        </div>
                        <div class="form-group col-sm-9" style="margin-top: 25px;">
                            <div class="col-sm-3">
                                <button id="search" type="submit" name="action" value="search"
                                        class="btn btn-info active  pull-right">Search
                                </button>
                            </div>
                            <div class="col-sm-3">
                                <button id="clear" type="submit" name="action" value="clear"
                                        class="btn btn-info active  pull-right">Clear
                                </button>
                            </div>
                            <div class="col-sm-3">
                                <button id="newSearch" type="submit" name="action" value="newSearch"
                                        class="btn btn-info active  pull-right">New Search
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-sm-12" style="margin-top: 40px;">
                        <hr style="border-top-width: 3px;"/>
                    </div>
                    <div data-th-if="*{showResults}">
                        <div class="form-group col-sm-12" style="margin-top: -40px;"
                             data-th-if="*{showResults}">
                            <h3 align="left" style="color: dodgerblue">Search Results</h3>
                                                <span class="pull-right" style="margin-top: -30px; font-weight: bold">Search Results Found: <span
                                                        th:text="*{totalRecordsCount}"></span></span>
                        </div>
                        <div class="form-group col-sm-12"
                             data-th-if="*{searchResultRows.size() == 0 &amp;&amp; showResults}">
                            <span>No search results found. Please refine search results.</span>
                        </div>
                        <div id="searchResultsDiv" class="form-group col-sm-12 table-responsive"
                             data-th-if="*{searchResultRows.size() > 0 &amp;&amp; showResults}">
                            <table id="searchResults" name="searchResults" class="table table-hover">
                                <thead id="mainHead">
                                <tr id="mainRow">
                                    <th>
                                        <label for="selectAll" style="width: 80px;">Select
                                            All</label><input type="checkbox" id="selectAll"
                                                              name="selectAll"
                                                              th:field="*{selectAll}"
                                                              style="margin-left: 26px;"
                                                              onclick=""/>
                                    </th>
                                    <th>Title</th>
                                    <th>Author</th>
                                    <th>Publisher</th>
                                    <th>Publisher Date</th>
                                    <th>Owning Institution</th>
                                    <th>Customer Code</th>
                                    <th>Collection Group Designation</th>
                                    <th>Use Restriction</th>
                                    <th>Barcode</th>
                                    <th>Summary Holdings</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr data-th-id="'searchResults-'+ ${searchResultStat.index}" class="clickable" th:classappend="${searchResult.showItems} ? 'info' : ''" data-toggle="collapse" th:attr="data-target='.row' + ${searchResultStat.index}" th:each="searchResult,searchResultStat : *{searchResultRows}">
                                    <td data-th-id="'searchResultsDataPlus-'+ ${searchResultStat.index}">
                                        <i class="fa fa-circle"
                                           th:if="${searchResult.availability == 'Available' || searchResult.availability == 'Not Available'}"
                                           th:style="${searchResult.availability == 'Available'} ? 'font-size: 20px; color: green;' : (${searchResult.availability == 'Not Available'} ? 'font-size: 20px; color: red;' : '')"></i>
                                        <input type="checkbox" id="selected" name="selected"
                                               th:value="${searchResult.selected}"
                                               th:field="*{searchResultRows[__${searchResultStat.index}__].selected}"
                                               style="margin-left: 5px;"/>
                                    </td>
                                    <td data-th-id="'searchResultsDataTitle-'+ ${searchResultStat.index}"><a href="#" data-th-id="'searchResultsDataTitleS-'+ ${searchResultStat.index}" th:style="${searchResult.leaderMaterialType == 'Serial'} ? 'color: blue;' : ''" th:text="${searchResult.title}"></a></td>
                                    <td data-th-id="'searchResultsDataAuthor-'+ ${searchResultStat.index}"><span data-th-id="'searchResultsDataAuthorS-'+ ${searchResultStat.index}" th:text="${searchResult.author}"></span></td>
                                    <td data-th-id="'searchResultsDataPub-'+ ${searchResultStat.index}"><span data-th-id="'searchResultsDataPubS-'+ ${searchResultStat.index}" th:text="${searchResult.publisher}"></span></td>
                                    <td data-th-id="'searchResultsDataPubDate-'+ ${searchResultStat.index}"><span data-th-id="'searchResultsDataPubDateS-'+ ${searchResultStat.index}" th:text="${searchResult.publisherDate}"></span></td>
                                    <td data-th-id="'searchResultsDataOwnInst-'+ ${searchResultStat.index}"><span data-th-id="'searchResultsDataOwnInstS-'+ ${searchResultStat.index}" th:text="${searchResult.owningInstitution}"></span></td>
                                    <td data-th-id="'searchResultsDataCustCode-'+ ${searchResultStat.index}"><span data-th-id="'searchResultsDataCustCodeS-'+ ${searchResultStat.index}" th:text="${searchResult.customerCode}"></span></td>
                                    <td data-th-id="'searchResultsDataCGD-'+ ${searchResultStat.index}"><span data-th-id="'searchResultsDataCGDS-'+ ${searchResultStat.index}" th:text="${searchResult.collectionGroupDesignation}"></span></td>
                                    <td data-th-id="'searchResultsDataUR-'+ ${searchResultStat.index}"><span data-th-id="'searchResultsDataURS-'+ ${searchResultStat.index}" th:text="${searchResult.useRestriction}"></span></td>
                                    <td data-th-id="'searchResultsDataBar-'+ ${searchResultStat.index}"><span data-th-id="'searchResultsDataBarS-'+ ${searchResultStat.index}" th:text="${searchResult.barcode}"></span></td>
                                    <td data-th-id="'searchResultsDataSH-'+ ${searchResultStat.index}"><span data-th-id="'searchResultsDataSHS-'+ ${searchResultStat.index}" th:text="${searchResult.summaryHoldings}"></span></td>
                                        <tr  data-th-if="${searchResult.showItems}" data-th-id="'searchItemResultsRow-' + ${searchResultStat.index}" class="collapse" th:classappend="'row' + ${searchResultStat.index}">
                                            <th></th>
                                            <th></th>
                                            <th data-th-id="'searchItemResultsSelectHead-' + ${searchResultStat.index}">
                                                <label for="selectAll" style="width: 80px;">Select
                                                    All</label><input type="checkbox" id="selectAllItems"
                                                                      name="selectAllItems"
                                                                      th:field="*{searchResultRows[__${searchResultStat.index}__].selectAllItems}"
                                                                      style="margin-left: 26px;"
                                                                      onclick=""/>
                                            </th>
                                            <th data-th-id="'searchItemResultsCCHead-' + ${searchResultStat.index}">Call Number</th>
                                            <th data-th-id="'searchItemResultsCHnEnumHead-' + ${searchResultStat.index}">Chronology &amp; Enumeration</th>
                                            <th data-th-id="'searchItemResultsBarHead-' + ${searchResultStat.index}">Barcode</th>
                                            <th data-th-id="'searchItemResultsURHead-' + ${searchResultStat.index}">Use Restriction</th>
                                            <th data-th-id="'searchItemResultsCGDHead-' + ${searchResultStat.index}">Collection Group Designation</th>
                                        </tr>
                                        <tr data-th-if="${searchResult.showItems}" data-th-id="'searchItemResultsRow-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}" th:each="searchItemResult,searchItemResultStat : ${searchResult.searchItemResultRows}" class="collapse" th:classappend="'row' + ${searchResultStat.index}">
                                            <td></td>
                                            <td></td>
                                            <td data-th-id="'searchItemResultsDataPlus-'+ ${searchItemResultStat.index}">
                                                <i class="fa fa-circle"
                                                   th:if="${searchItemResult.availability == 'Available' || searchItemResult.availability == 'Not Available'}"
                                                   th:style="${searchItemResult.availability == 'Available'} ? 'font-size: 20px; color: green;' : (${searchItemResult.availability == 'Not Available'} ? 'font-size: 20px; color: red;' : '')"></i>
                                                <input type="checkbox" id="selectedItem" name="selectedItem"
                                                       th:value="${searchItemResult.selectedItem}"
                                                       th:field="*{searchResultRows[__${searchResultStat.index}__].searchItemResultRows[__${searchResultStat.index}__].selectedItem}"
                                                       style="margin-left: 5px;"/>
                                            </td>
                                            <td data-th-id="'searchItemResultsDataCC-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}"><span data-th-id="'searchItemResultsDataCCS-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}" th:text="${searchItemResult.callNumber}"></span></td>
                                            <td data-th-id="'searchItemResultsDataChnEnum-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}"><span data-th-id="'searchItemResultsDataChnEnum-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}" th:text="${searchItemResult.chronologyAndEnum}"></span></td>
                                            <td data-th-id="'searchItemResultsDataBar-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}"><span data-th-id="'searchItemResultsDataBarS-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}" th:text="${searchItemResult.barcode}"></span></td>
                                            <td data-th-id="'searchItemResultsDataUR-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}"><span data-th-id="'searchItemResultsDataURS-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}" th:text="${searchItemResult.useRestriction}"></span></td>
                                            <td data-th-id="'searchItemResultsDataCGD-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}"><span data-th-id="'searchItemResultsDataCGDS-' + ${searchResultStat.index} + '-' + ${searchItemResultStat.index}" th:text="${searchItemResult.collectionGroupDesignation}"></span></td>
                                        </tr>
                                </tr>
                                </tbody>
                            </table>
                            <div class="col-md-12 form-group">
                                <div class="pull-left" style="margin-top: -40px;"
                                     th:if="*{totalPageCount &gt; 1}">
                                    <div class="pagination pagination-centered">
                                        <ul class="pagination">
                                            <li th:class="*{pageNumber == 0} ? 'disabled' : ''">
                                                <span th:if="*{pageNumber == 0}">First</span>
                                                <a th:if="*{pageNumber != 0}" href="#"
                                                   title="Go to first page"
                                                   onclick="document.getElementById('firstBottom').click();">First</a>
                                                <button id="firstBottom" type="submit" name="action"
                                                        value="first" hidden="hidden"></button>
                                            </li>
                                            <li th:class="*{(pageNumber != 0) &amp;&amp; (totalPageCount &gt; 1)}? '' : 'disabled'">
                                                <span th:if="*{pageNumber == 0}">Previous</span>
                                                <a th:if="*{pageNumber != 0}" href="#"
                                                   title="Go to previous page"
                                                   onclick="document.getElementById('pageNumber').value = parseInt(document.getElementById('pageNumber').value) - 1; document.getElementById('previousBottom').click();">Previous</a>
                                                <button id="previousBottom" type="submit"
                                                        name="action" value="previous"
                                                        hidden="hidden"></button>
                                            </li>
                                            <li th:class="*{(pageNumber+1 != totalPageCount) &amp;&amp; (totalPageCount &gt; 1)}? '' : 'disabled'">
                                                <span th:if="*{pageNumber+1 == totalPageCount}">Next</span>
                                                <a th:if="*{pageNumber+1 != totalPageCount}"
                                                   href="#" title="Go to next page"
                                                   onclick="document.getElementById('pageNumber').value = parseInt(document.getElementById('pageNumber').value) + 1; document.getElementById('nextBottom').click();">Next</a>
                                                <button id="nextBottom" type="submit" name="action"
                                                        value="next" hidden="hidden"></button>
                                            </li>
                                            <li th:class="*{pageNumber+1 == totalPageCount}? 'disabled' : ''">
                                                <span th:if="*{pageNumber+1 == totalPageCount}">Last</span>
                                                <a th:if="*{pageNumber+1 != totalPageCount}"
                                                   href="#"
                                                   onclick="document.getElementById('lastBottom').click();">Last</a>
                                                <button id="lastBottom" type="submit" name="action"
                                                        value="last" hidden="hidden"></button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="pull-right">
                                    <button id="export" type="button" name="action" value="export"
                                            class="btn btn-info active  pull-right">Export Selected
                                        Records
                                    </button>
                                    <button id="request" type="button" name="action" value="request"
                                            class="btn btn-info active  pull-right"
                                            style="margin-right: 10px;">Request Selected Records
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-12 form-group" style="margin-top: -40px;">
                                <i class="fa fa-circle" style="font-size: 20px; color: green;"></i><span> Available</span>
                                <i class="fa fa-circle" style="font-size: 20px; color: red; margin-left: 15px;"></i><span> Not Available</span>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
</div>
</body>
</html>